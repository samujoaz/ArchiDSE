include main_0.txt;
include slice_1.txt;
include slice_2.txt;
include write_buffer_0.txt;

component_instance main_behaviour_0 main main_timing_characs_0;
component_instance slice_behaviour_1 slice1 slice_timing_characs_1;
component_instance slice_behaviour_2 slice2 slice_timing_characs_2;
component_instance write_buffer_behaviour_0 write_buffer write_buffer_timing_characs_0;

component_instance Timer_impl t1 timer;
configuration t1->configure_timerspec_and_sched_fifo( 0, 100000, 0, 125000000, true, 10 );

connection( asynchronous ) cnx_main t1.tick main.input_timer;
configuration cnx_main.configure_priority_and_sched_fifo( 15, true );
configuration cnx_main.configure_affinity( 0 );

connection( asynchronous ) cnx_slice1 main.comm_slice1 slice1.input;
configuration cnx_slice1.configure_priority_and_sched_fifo( 14, true );
configuration cnx_slice1.configure_affinity( 0 );
connection( asynchronous ) cnx_slice2 main.comm_slice2 slice2.input;
configuration cnx_slice2.configure_priority_and_sched_fifo( 14, true );
configuration cnx_slice2.configure_affinity( 0 );


connection( asynchronous ) cnx_out1 slice1.output main.input_slice1;
configuration cnx_out1.configure_priority_and_sched_fifo( 6, true );
configuration cnx_out1.configure_affinity( 0 );
connection( asynchronous ) cnx_out2 slice2.output main.input_slice2;
configuration cnx_out2.configure_priority_and_sched_fifo( 6, true );
configuration cnx_out2.configure_affinity( 0 );

connection( asynchronous ) cnx_write_buffer main.comm_write_buffer write_buffer.input;
configuration cnx_write_buffer.configure_priority_and_sched_fifo( 15, true );
configuration cnx_write_buffer.configure_affinity( 0 );


entry_point t1.start.run;
final_point t1.stop.run;
